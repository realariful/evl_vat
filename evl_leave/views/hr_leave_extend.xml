<odoo>
  <data>
        <record id="hr_holidays.hr_leave_view_form" model="ir.ui.view">
            <field name="name">hr.leave.view.form.inherit</field>
            <field name="model">hr.leave</field>

            <field name="priority">32</field>
            <field name="arch" type="xml">
                <form string="Leave Request">
                <field name="can_reset" invisible="1"/>
                <field name="can_approve" invisible="1"/>
                <field name="first_approver_id" invisible="1"/>
                <field name="second_approver_id" invisible="1"/>
                <field name="third_approver_id" invisible="1"/>
                <field name="first_approver" invisible="1"/>
                <field name="second_approver" invisible="1"/>
                <field name="final_approver" invisible="1"/>
                <field name="logged_user" invisible="1"/>
                <field name="manager_id" invisible="1"/>  
                <field name="employee_id" invisible="1"/>
                <field name="validation_type"  invisible="1" readonly="1" />
                <header>
                    <button string="Confirm" name="action_confirm" states="draft" type="object" class="oe_highlight" attrs="{'invisible': [('state', 'in', ['confirm','validate','validate2','validate1'] )]}" />
                    <button string="First Approval" name="action_approve" type="object" class="oe_highlight" attrs="{'invisible': ['|', '|', ('second_approver', '!=', False), ('first_approver', '!=', True), ('state', 'in', ['validate','validate2','validate1'] )]}" />
       
                    <button string="Second Approval" name="action_validate2" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('second_approver', '!=', True) , ('state', 'in', ['validate','confirm'] )]}"/>                            
                    <button string="Final Approval" name="action_validate" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('final_approver', '!=', True) ]}" />           
                    <button string="Refuse" name="action_refuse"  type="object" attrs="{'invisible': ['|', ('can_approve', '=', False), ('state', 'not in', ('confirm','validate','validate1'))]}"/>
                    <button string="Reset to Draft" name="action_draft" type="object" attrs="{'invisible': ['|', ('can_reset', '=', False), ('state', 'not in', ['confirm', 'refuse'])]}"/>

                    <field name="state" widget="statusbar" statusbar_visible="draft,confirm,validate,validate1,validate2"/>
                </header>

                <sheet>
                    <field name="leave_type_request_unit" invisible="1"/>
                    <div class="oe_title oe_read_only" attrs="{'invisible': [('display_name', '=', False)]}" name="title">
                        <h1>
                            <field name="display_name"/>
                        </h1>
                    </div>
                    <div class="row" name="status_id">
                        <label class="col-2 mr-0" for="holiday_status_id"/>
                        <!-- RLI FIXME: we should avoid redefining the domain in the view when there already is a domain on the model -->
                        <field name="holiday_status_id" domain="['&amp;', ('virtual_remaining_leaves', '&gt;', 0), '|', ('allocation_type', 'in', ['fixed_allocation', 'no']),'&amp;',('allocation_type', '=', 'fixed'), ('max_leaves', '>', '0')]" context="{'employee_id':employee_id, 'default_date_from':date_from}" options="{'no_create': True, 'no_open': True}" class="col-9 pl-0" nolabel="1"/>
                    </div>
                    <group>
                        <group>
                            <label for="request_date_from" string="From"/>
                            <div>
                                <field name="date_from" invisible="1"/>
                                <field name="date_to" invisible="1"/>
                                <div class="o_row o_row_readonly o_hr_holidays_dates">
                                    <field name="request_date_from" class="oe_inline"
                                        attrs="{'readonly': [('state', 'not in', ('draft', 'confirm'))]}"/>
                                    <span class="oe_inline"
                                        attrs="{'invisible': ['|', ('request_unit_half', '=', True), ('request_unit_hours', '=', True)]}">
                                        To
                                    </span>
                                    <field name="request_date_to" class="oe_inline"
                                        attrs="{
                                            'readonly': [('state', 'not in', ('draft', 'confirm'))],
                                            'invisible': ['|', ('request_unit_half', '=', True), ('request_unit_hours', '=', True)]
                                        }"/>
                                    <field name="request_date_from_period" class="oe_inline oe_edit_only"
                                        string="In"
                                        options="{'horizontal': True}"
                                        attrs="{
                                            'readonly': [('state', 'not in', ('draft', 'confirm'))],
                                            'required': [('request_unit_half', '=', True)],
                                            'invisible': [('request_unit_half', '=', False)]}"/>
                                </div>
                                <div class="o_row o_row_readonly oe_edit_only">
                                    <field name="request_unit_half" attrs="{
                                        'readonly': [('state', 'not in', ('draft', 'confirm'))],
                                        'invisible': [('leave_type_request_unit', '=', 'day')]
                                    }"/>
                                    <label for="request_unit_half" attrs="{
                                        'readonly': [('state', 'not in', ('draft', 'confirm'))],
                                        'invisible': [('leave_type_request_unit', '=', 'day')]
                                    }"/>
                                    <field name="request_unit_hours" attrs="{
                                        'readonly': [('state', 'not in', ('draft', 'confirm'))],
                                        'invisible': [('leave_type_request_unit', '!=', 'hour')]
                                    }"/>
                                    <label for="request_unit_hours" attrs="{
                                        'readonly': [('state', 'not in', ('draft', 'confirm'))],
                                        'invisible': [('leave_type_request_unit', '!=', 'hour')]
                                    }"/>
                                    <field name="request_unit_custom" invisible="1" attrs="{
                                        'readonly': [('state', 'not in', ('draft', 'confirm'))],
                                    }"/>
                                    <label for="request_unit_custom" invisible="1" attrs="{
                                        'readonly': [('state', 'not in', ('draft', 'confirm'))],
                                    }"/>
                                </div>
                                <div class="o_row o_row_readonly">
                                    <label for="request_hour_from" string="From"
                                        attrs="{'invisible': [('request_unit_hours', '=', False)]}"/>
                                    <field name="request_hour_from"
                                        attrs="{
                                            'readonly': [('state', '=', 'validate')],
                                            'required': [('request_unit_hours', '=', True)],
                                            'invisible': [('request_unit_hours', '=', False)]}"/>
                                    <label for="request_hour_to" string="To"
                                        attrs="{'invisible': [('request_unit_hours', '=', False)]}"/>
                                    <field name="request_hour_to"
                                        attrs="{
                                            'readonly': [('state', '=', 'validate')],
                                            'required': [('request_unit_hours', '=', True)],
                                            'invisible': [('request_unit_hours', '=', False)]}"/>
                                </div>
                            </div>

                            <!-- When the user is leave manager, he should always see `number_of_days` to allow
                            him to edit the value. `number_of_hours_display` is only an informative field -->
                            <label for="number_of_days" string="Duration" attrs="{'invisible': ['|', ('request_unit_half', '=', True), ('request_unit_hours', '=', True)]}"/>
                            <div attrs="{'invisible': ['|', ('request_unit_half', '=', True), ('request_unit_hours', '=', True)]}">
                                <div groups="!hr_holidays.group_hr_holidays_manager" attrs="{'invisible': [('leave_type_request_unit', '=', 'hour')]}">
                                    <field name="number_of_days_display" nolabel="1" readonly="1" class="oe_inline"/>
                                    <span class="ml8">Days</span>
                                </div>
                                <div groups="hr_holidays.group_hr_holidays_manager">
                                    <field name="number_of_days" nolabel="1" class="oe_inline"/>
                                    <span class="ml8">Days</span>
                                </div>
                                <div attrs="{'invisible': [('leave_type_request_unit', '!=', 'hour')]}">
                                    <field name="number_of_hours_display" nolabel="1" class="oe_inline"/>
                                    <span class="ml8">Hours</span>
                                </div>
                            </div>

                            <field name="user_id" invisible="1"/>

                            <!-- <field name="name" attrs="{'readonly': [('state', 'not in', ('draft', 'confirm'))]}"/> -->
                            <field name="yes" />
                            <field name="attachment" widget="many2many_binary" attrs="{'invisible': [('yes', '!=', True)]}"/>
                        </group>
                        <group name="col_right">
                            <field name="employee_id" invisible="1"/>
                            <field name="department_id" groups="hr_holidays.group_hr_holidays_user" invisible="1"/>
                        </group>
                    </group>
                    <div class="row" name="description">
                        <label class="col-2 mr-0" for="name"/>
                        <field name="name" attrs="{'readonly': [('state', 'not in', ('draft', 'confirm'))]}" class="col-9 pl-0" nolabel="1"/>
                    </div>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>



    <record id="hr_holidays.hr_leave_view_tree" model="ir.ui.view">
        <field name="name">hr.holidays.view.tree</field>
        <field name="model">hr.leave</field>
        <field name="arch" type="xml">
            <tree decoration-danger="state == 'refuse'" decoration-info="state == 'draft'" string="Leave Requests"
                   decoration-bf="message_needaction == True">
                <field name="employee_id"/>
                <field name="department_id"/>
                <field name="holiday_type" string="Mode" groups="base.group_no_one"/>
                <field name="holiday_status_id"/>
                <field name="name"/>
                <field name="date_from"/>
                <field name="date_to"/>
                <field name="duration_display"/>
                <field name="state"/>
                <field name="payslip_status" widget="toggle_button" options='{"active": "Reported in last payslips", "inactive": "To Report in Payslip"}' groups="hr_holidays.group_hr_holidays_user"/>
                <field name="category_id" invisible="1"/>
                <field name="department_id" invisible="1"/>
                <field name="user_id" invisible="1"/>
                <field name="message_needaction" invisible="1"/>
                <button string="Approve" name="action_approve" type="object"
                    icon="fa-check text-success"
                    states="confirm"
                    groups="hr_holidays.group_hr_holidays_user"/>
                <button string="Final Approval" name="action_validate" type="object"
                    icon="fa-check text-success"
                    states="validate1"
                    groups="hr_holidays.group_hr_holidays_manager"/>
                <button string="Refuse" name="action_refuse" type="object"
                    icon="fa-ban text-danger"
                    states="confirm,validate,validate1"
                    groups="hr_holidays.group_hr_holidays_manager"/>
                <field name="activity_exception_decoration" widget="activity_exception"/>
            </tree>
        </field>
    </record>














  </data>
</odoo>

